webpackJsonp([14],{Ckox:function(e,t){},VDr6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){var e=this,t=function(e,t,a){if(!t)return a(new Error("验证码不能为空"));a()};return{activeNames:["1","2","3","4"],phoneMsg:"",dialogChangePhoneVisible:!1,changePhone:{newPhone:"",vertifyCode:""},changePhoneRules:{newPhone:[{validator:function(t,a,i){if(!a)return i(new Error("手机号码不能为空"));setTimeout(function(){a.match(/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/)?a==e.$store.state.user.phone?i(new Error("该手机号与当前手机号相同")):setTimeout(function(){e.$axios.post("/canUsePhone",{phone:a}).then(function(e){"error"==e.data?i(new Error("该手机号已被注册，请更改")):i()})},1e3):i(new Error("请输入正确的手机号"))},1e3)},trigger:"blur"}],vertifyCode:[{validator:t,trigger:"blur"}]},dialogEmailVisible:!1,addEmail:{email:"",openNotice:""},dialogIdentityVisible:!1,IDcard:{IDcardFace:"",IDcardBack:""},companyImg:"",dialogwaitIdentityVisible:!1,dialogCompanyIdentityVisible:!1,dialogChangePWVisible:!1,changePW:{oldPassword:"",newPassword:"",vertifyCode:""},changePWRules:{oldPassword:[{validator:function(t,a,i){if(!a)return i(new Error("密码不能为空"));setTimeout(function(){e.$axios.post("/isPWTrue",{name:e.$store.state.user.name}).then(function(e){return!e.data&&i("密码不正确")}).catch(function(e){return console.log(e)})},1e3)},trigger:"blur"}],newPassword:[{validator:function(t,a,i){if(!a)return i(new Error("密码不能为空"));setTimeout(function(){a.match(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,}$/)?a==e.changePW.oldPassword?i(new Error("新密码不能与旧密码相同")):i():i(new Error("密码至少8位且包含英文和数字两种字符"))},1e3)},trigger:"blur"}],vertifyCode:[{validator:t,trigger:"blur"}]},formLabelWidth:"100px",tableData:[{option:"发布众筹",everyCan:!0,personCan:!0,companyCan:!0},{option:"发布评论",everyCan:!0,personCan:!0,companyCan:!0},{option:"众筹结算",everyCan:!1,personCan:!0,companyCan:!0},{option:"认证标识",everyCan:!1,personCan:!0,companyCan:!0}],baseSetting:{isBindEmail:"修改邮箱",isBindIdentity:"重新认证",isBindCompany:"重新认证",passwordRank:4,isOpenNotice:!1,isOpenMessage:!1,isOpenEmail:!1}}},methods:{changePhoneFn:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$axios.post("/changePhone",{newPhone:t.changePhone.newPhone,vertifyCode:t.changePhone.vertifyCode}).then(function(e){t.$store.commit("CHANGE_PHONE",e.data),t.dialogChangePhoneVisible=!1}).catch(function(e){return console.log(e)})})},bindEmail:function(){this.$axios.post("/changePhone",{email:this.addEmail.email,vertifyCode:this.addEmail.openNotice}).then(function(e){return console.log(e.data)}).catch(function(e){return console.log(e)}),this.dialogEmailVisible=!1},addIDcardFace:function(e){this.IDcard.IDcardFace=e.url},addIDcardBack:function(e){this.IDcard.IDcardBack=e.url},identityIDcard:function(){var e=this;this.IDcard.IDcardFace&&this.IDcard.IDcardBack?this.$axios.post("/identityIDcard",{IDcard:this.IDcard}).then(function(t){return e.dialogwaitIdentityVisible=!0}).catch(function(e){return console.log(e)}):this.$message.warning("请上传照片")},addCompanyImg:function(e){this.companyImg=e.url},identifyCompany:function(){var e=this;this.companyImg?this.$axios.post("/identifyCompany",{IDcard:this.companyImg}).then(function(t){return e.dialogwaitIdentityVisible=!0}).catch(function(e){return console.log(e)}):this.$message.warning("请上传照片")},changePWFn:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$axios.post("/changePW",{changePW:t.changePW}).then(function(e){})})},isOpenNoticeFn:function(e){console.log(e),this.$axios.post("/isOpenNotice",{name:this.$store.state.user.name,statu:e}).then(function(e){return""}).catch(function(e){return console.log(e)})},isOpenMessageFn:function(e){this.$axios.post("/isOpenMessage",{name:this.$store.state.user.name,statu:e}).then(function(e){return""}).catch(function(e){return console.log(e)})},isOpenEmailFn:function(e){this.$axios.post("/isOpenEmail",{name:this.$store.state.user.name,statu:e}).then(function(e){return""}).catch(function(e){return console.log(e)})}},mounted:function(){var e=this;this.$axios.get("/getSetting").then(function(t){e.baseSetting=t.data}).catch(function(e){return console.log(e)})}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mySetting"},[a("h2",[e._v("我的设置")]),e._v(" "),a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"实名认证",name:"1"}},[a("div",[a("el-alert",{attrs:{closable:!1,title:"手机绑定",type:"success","show-icon":""}},[a("div",{staticClass:"wordTip"},[e._v("\n                        绑定手机后，您即可享受丰富的手机服务，如手机找回密码、开通手机动态密码等。\n                    ")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialogChangePhoneVisible=!0}}},[e._v("修改手机号")])],1),e._v(" "),a("el-dialog",{attrs:{title:"修改手机号",visible:e.dialogChangePhoneVisible,width:"600px"},on:{"update:visible":function(t){e.dialogChangePhoneVisible=t}}},[a("el-form",{ref:"changePhone",attrs:{model:e.changePhone,"status-icon":"",rules:e.changePhoneRules}},[a("el-form-item",{attrs:{label:"新手机号码","label-width":e.formLabelWidth,prop:"newPhone"}},[a("el-input",{attrs:{clearable:!0,"auto-complete":"off"},model:{value:e.changePhone.newPhone,callback:function(t){e.$set(e.changePhone,"newPhone",t)},expression:"changePhone.newPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码","label-width":e.formLabelWidth,prop:"vertifyCode"}},[a("el-col",{attrs:{sm:13,md:14,lg:13,xl:13}},[a("el-input",{attrs:{clearable:!0,"auto-complete":"off"},model:{value:e.changePhone.vertifyCode,callback:function(t){e.$set(e.changePhone,"vertifyCode",t)},expression:"changePhone.vertifyCode"}})],1),e._v(" "),a("el-button",{staticClass:"sendPhoneCode",attrs:{type:"danger"}},[e._v("发送手机验证码")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogChangePhoneVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changePhoneFn("changePhone")}}},[e._v("修 改")])],1)],1),e._v(" "),a("el-alert",{attrs:{closable:!1,title:"邮箱绑定",type:"修改邮箱"==e.baseSetting.isBindEmail?"success":"warning","show-icon":""}},[a("div",{staticClass:"wordTip"},[e._v("绑定邮箱后，可获取最新消息推送，以及项目消息提醒。")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialogEmailVisible=!0}}},[e._v(e._s(e.baseSetting.isBindEmail))])],1),e._v(" "),a("el-dialog",{attrs:{title:"邮箱绑定",visible:e.dialogEmailVisible,width:"600px"},on:{"update:visible":function(t){e.dialogEmailVisible=t}}},[a("el-form",{attrs:{model:e.addEmail}},[a("el-form-item",{attrs:{label:"请输入邮箱","label-width":e.formLabelWidth}},[a("el-input",{attrs:{clearable:!0,"auto-complete":"off"},model:{value:e.addEmail.email,callback:function(t){e.$set(e.addEmail,"email",t)},expression:"addEmail.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-text":"开启消息通知"},model:{value:e.addEmail.openNotice,callback:function(t){e.$set(e.addEmail,"openNotice",t)},expression:"addEmail.openNotice"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogEmailVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.bindEmail}},[e._v("绑 定")])],1)],1),e._v(" "),a("el-alert",{attrs:{closable:!1,title:"身份认证",type:"重新认证"==e.baseSetting.isBindIdentity?"success":"warning","show-icon":""}},[a("div",{staticClass:"wordTip"},[e._v("身份认证后，将立即增加您的信任度。")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialogIdentityVisible=!0}}},[e._v(e._s(e.baseSetting.isBindIdentity))])],1),e._v(" "),a("el-dialog",{attrs:{title:"身份认证",visible:e.dialogIdentityVisible,width:"600px"},on:{"update:visible":function(t){e.dialogIdentityVisible=t}}},[a("el-form",{staticClass:"upload"},[a("el-form-item",{attrs:{label:""}},[a("span",[e._v("请上传本人与身份证正面同框照")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-change":e.addIDcardFace,"auto-upload":!1}},[e.IDcard.IDcardFace?a("img",{staticClass:"avatar",attrs:{src:e.IDcard.IDcardFace}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("span",[e._v("请上传本人与身份证反面同框照")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"auto-upload":!1,"on-change":e.addIDcardBack}},[e.IDcard.IDcardBack?a("img",{staticClass:"avatar",attrs:{src:e.IDcard.IDcardBack}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogIdentityVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.identityIDcard}},[e._v("认 证")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"上传成功",visible:e.dialogwaitIdentityVisible,width:"600px"},on:{"update:visible":function(t){e.dialogwaitIdentityVisible=t}}},[a("el-alert",{attrs:{title:"上传成功，我们将在3-5个工作日给予回复，可在动态管理->最新消息处查看。",type:"success","show-icon":""}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogwaitIdentityVisible=!1,e.dialogIdentityVisible=!1,e.dialogCompanyIdentityVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-alert",{attrs:{closable:!1,title:"企业认证",type:"重新认证"==e.baseSetting.isBindCompany?"success":"warning","show-icon":""}},[a("div",{staticClass:"wordTip"},[e._v("企业认证后，可发布带有企业标识的众筹项目。")]),e._v(" "),a("el-button",{attrs:{plain:""},on:{click:function(t){e.dialogCompanyIdentityVisible=!0}}},[e._v(e._s(e.baseSetting.isBindCompany))])],1),e._v(" "),a("el-dialog",{attrs:{title:"企业认证",visible:e.dialogCompanyIdentityVisible,width:"600px"},on:{"update:visible":function(t){e.dialogCompanyIdentityVisible=t}}},[a("el-form",{staticClass:"upload"},[a("el-form-item",{attrs:{label:""}},[a("span",[e._v("请上传营业执照")]),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","auto-upload":!1,"on-change":e.addCompanyImg,"show-file-list":!1}},[e.companyImg?a("img",{staticClass:"avatar",attrs:{src:e.companyImg}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogIdentityVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.identifyCompany}},[e._v("认 证")])],1)],1)],1)]),e._v(" "),a("el-collapse-item",{attrs:{title:"账号安全",name:"2"}},[a("el-alert",{attrs:{closable:!1,title:"",type:"info"}},[a("div",[a("span",[e._v("当前账号安全等级：")]),e._v(" "),a("el-rate",{attrs:{disabled:"",colors:["#99A9BF","#F7BA2A","#FF9900"]},model:{value:e.baseSetting.passwordRank,callback:function(t){e.$set(e.baseSetting,"passwordRank",t)},expression:"baseSetting.passwordRank"}}),e._v(" "),a("p",{staticClass:"password"},[e._v("密码："),a("span",[e._v("*********")])]),e._v(" "),a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(t){e.dialogChangePWVisible=!0}}},[e._v("修改密码")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.dialogChangePWVisible,width:"600px"},on:{"update:visible":function(t){e.dialogChangePWVisible=t}}},[a("el-form",{ref:"changePW",attrs:{model:e.changePW,"status-icon":"",rules:e.changePWRules}},[a("el-form-item",{attrs:{label:"旧密码","label-width":e.formLabelWidth,prop:"oldPassword"}},[a("el-input",{attrs:{clearable:!0,type:"password","auto-complete":"off"},model:{value:e.changePW.oldPassword,callback:function(t){e.$set(e.changePW,"oldPassword",t)},expression:"changePW.oldPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth,prop:"newPassword"}},[a("el-input",{attrs:{clearable:!0,type:"password","auto-complete":"off"},model:{value:e.changePW.newPassword,callback:function(t){e.$set(e.changePW,"newPassword",t)},expression:"changePW.newPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"验证码","label-width":e.formLabelWidth,prop:"vertifyCode"}},[a("el-col",{attrs:{sm:13,md:14,lg:13,xl:13}},[a("el-input",{attrs:{clearable:!0,"auto-complete":"off"},model:{value:e.changePhone.vertifyCode,callback:function(t){e.$set(e.changePhone,"vertifyCode",t)},expression:"changePhone.vertifyCode"}})],1),e._v(" "),a("el-button",{staticClass:"sendPhoneCode",attrs:{type:"danger"}},[e._v("发送手机验证码")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogChangePWVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.changePWFn("changePW")}}},[e._v("修 改")])],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"消息通知",name:"3"}},[a("el-alert",{staticClass:"msg",attrs:{title:"",closable:!1,type:"info"}},[a("div",[a("i",{staticClass:"el-icon-info"}),e._v(" "),a("span",[e._v("是否开启系统通知：")]),e._v(" "),a("el-switch",{on:{change:e.isOpenNoticeFn},model:{value:e.baseSetting.isOpenNotice,callback:function(t){e.$set(e.baseSetting,"isOpenNotice",t)},expression:"baseSetting.isOpenNotice"}})],1),e._v(" "),a("div",[a("i",{staticClass:"el-icon-info"}),e._v(" "),a("span",[e._v("是否开启短信推送：")]),e._v(" "),a("el-switch",{on:{change:e.isOpenMessageFn},model:{value:e.baseSetting.isOpenMessage,callback:function(t){e.$set(e.baseSetting,"isOpenMessage",t)},expression:"baseSetting.isOpenMessage"}})],1),e._v(" "),a("div",[a("i",{staticClass:"el-icon-info"}),e._v(" "),a("span",[e._v("是否开启邮件推送：")]),e._v(" "),a("el-switch",{on:{change:e.isOpenEmailFn},model:{value:e.baseSetting.isOpenEmail,callback:function(t){e.$set(e.baseSetting,"isOpenEmail",t)},expression:"baseSetting.isOpenEmail"}})],1)])],1),e._v(" "),a("el-collapse-item",{attrs:{title:"权限查看",name:"4"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":{background:"rgb(230, 234, 235)",textAlign:"center"},"cell-style":{textAlign:"center"},data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.option))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"未认证",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.everyCan?a("i",{staticClass:"el-icon-circle-check"}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"个人认证",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.personCan?a("i",{staticClass:"el-icon-circle-check"}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"企业认证"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.companyCan?a("i",{staticClass:"el-icon-circle-check"}):e._e()]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(e){a("Ckox")},"data-v-3c020290",null);t.default=o.exports}});
//# sourceMappingURL=14.98c5ee07fa64b3acb8e9.js.map