webpackJsonp([15],{NNLV:function(t,e){},vKQh:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a={data:function(){return{focusDialog:!1,fansDialog:!1,focus:[{name:"tianyu",img:"https://p.moimg.net/project/project_20180612_1528793315_6404_crop.png?imageMogr2/auto-orient/strip",isFocus:"+ 关注"},{name:"aaa",img:"https://p.moimg.net/project/project_20180612_1528793315_6404_crop.png?imageMogr2/auto-orient/strip",isFocus:"已关注"}]}},computed:{_form:{get:function(){return console.log("aaa"),this.$store.state.user},set:function(t){form=t}}},methods:{onSubmit:function(){var t=this;""==this.form.name?this.$message.warning("昵称不能为空"):this.form.phone!=this.$store.state.user.phone?this.$message.warning("手机号不能在此处直接修改，可查看我的设置"):this.$axios.post("/commitMyMsg",{msg:this.form}).then(function(e){"suc"==e.data.state?(t.$store.commit("LOGIN_IN",e.data.msg),t.$message.success("保存成功")):t.$message.warning("该昵称已被注册")}).catch(function(e){t.$message.error("保存失败，请重试")})},dateChange:function(t){this.form.date=t.getTime()},isRepeatName:function(){var t=this;this.$axios.post("/isRepeatName",{name:this.form.name}).then(function(e){"error"==e.data&&t.$message.warning("该昵称已被注册，请更改")})},handleSuccess:function(t,e){this.$store.commit("CHANGE_IMG",t.data)},goPersonPage:function(t){this.$router.push("/user/"+t)},isFocus:function(t,e){var o=this;console.log(s(this.$store.state.user.focusNum));var a=this._form.focus;"已关注"===a[e].isFocus?a[e].isFocus="+ 关注":a[e].isFocus="已关注","已关注"===a[e].isFocus?this.$store.commit("CHANGE_FOCUSNUM",this.$store.state.user.focusNum+1):this.$store.commit("CHANGE_FOCUSNUM",this.$store.state.user.focusNum-1),clearTimeout(a.timer),a.timer=setTimeout(function(){o.$axios.post("/isFocus",{user:o.$store.state.user.name,name:t,ifFocus:a[e].isFocus}).then(function(t){o.$store.commit("CHANGE_FOCUS",t.data)}).catch(function(t){console.log(t)})},2e3)}}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-col",{staticClass:"myMessage",attrs:{span:24,"data-content":"个人资料"}},[o("el-col",{attrs:{span:17}},[o("el-form",{attrs:{model:t._form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"昵称"}},[o("el-input",{on:{blur:t.isRepeatName},model:{value:t._form.name,callback:function(e){t.$set(t._form,"name",e)},expression:"_form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"手机号码"}},[o("el-input",{attrs:{disabled:""},model:{value:t._form.phone,callback:function(e){t.$set(t._form,"phone",e)},expression:"_form.phone"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"实名认证"}},[o("el-switch",{model:{value:t._form.certification,callback:function(e){t.$set(t._form,"certification",e)},expression:"_form.certification"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"生日"}},[o("el-col",{attrs:{span:24}},[o("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"选择日期"},on:{change:t.dateChange},model:{value:t._form.birthDate,callback:function(e){t.$set(t._form,"birthDate",e)},expression:"_form.birthDate"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"所在地"}},[o("el-col",{attrs:{span:11}},[o("el-input",{attrs:{placeholder:"省份/直辖市"},model:{value:t._form.province,callback:function(e){t.$set(t._form,"province",e)},expression:"_form.province"}})],1),t._v(" "),o("el-col",{attrs:{span:11,offset:2}},[o("el-input",{attrs:{placeholder:"县"},model:{value:t._form.city,callback:function(e){t.$set(t._form,"city",e)},expression:"_form.city"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"个人说明"}},[o("el-input",{attrs:{type:"textarea",maxlength:200,rows:3,resize:"none"},model:{value:t._form.intro,callback:function(e){t.$set(t._form,"intro",e)},expression:"_form.intro"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"danger"},on:{click:t.onSubmit}},[t._v("保存")])],1)],1)],1),t._v(" "),o("el-col",{staticClass:"changeHeadImg",attrs:{span:5,offset:2}},[o("div",{staticClass:"headImg",style:{backgroundImage:"url("+this.$store.state.user.img+")"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/changeImg","on-success":t.handleSuccess,"show-file-list":!1}},[this.$store.state.user.img?o("img",{attrs:{src:this.$store.state.user.img}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),o("div",[o("div",[o("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.focusDialog=!t.focusDialog}}},[t._v(t._s(t._form.focusNum))]),t._v(" "),o("span",[t._v("关注")])]),t._v(" "),o("div",[o("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.fansDialog=!t.fansDialog}}},[t._v(t._s(t._form.fansNum))]),t._v(" "),o("span",[t._v("粉丝")])])]),t._v(" "),o("el-dialog",{staticClass:"teamMember",attrs:{title:"关注",visible:t.focusDialog,width:"500px"},on:{"update:visible":function(e){t.focusDialog=e}}},t._l(t._form.focus,function(e,s){return o("el-row",{key:s},[o("el-col",{attrs:{span:3,offset:1}},[o("img",{attrs:{src:e.img},on:{click:function(o){t.goPersonPage(e.name)}}})]),t._v(" "),o("el-col",{attrs:{span:15,offset:1}},[o("h3",{on:{click:function(o){t.goPersonPage(e.name)}}},[t._v(t._s(e.name))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{size:"small",type:"danger",round:""},on:{click:function(o){t.isFocus(e.name,s)}}},[t._v(t._s(e.isFocus))])],1)],1)})),t._v(" "),o("el-dialog",{staticClass:"teamMember",attrs:{title:"粉丝",visible:t.fansDialog,width:"500px"},on:{"update:visible":function(e){t.fansDialog=e}}},t._l(t._form.focus,function(e,s){return o("el-row",{key:s},[o("el-col",{attrs:{span:3,offset:1}},[o("img",{attrs:{src:e.img},on:{click:function(o){t.goPersonPage(e.name)}}})]),t._v(" "),o("el-col",{attrs:{span:15,offset:1}},[o("h3",{on:{click:function(o){t.goPersonPage(e.name)}}},[t._v(t._s(e.name))])]),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{size:"small",type:"danger",round:""},on:{click:function(o){t.isFocus(e.name,s)}}},[t._v(t._s(e.isFocus))])],1)],1)}))],1)],1)},staticRenderFns:[]};var i=o("VU/8")(a,n,!1,function(t){o("NNLV")},"data-v-2e87374e",null);e.default=i.exports}});
//# sourceMappingURL=15.c3b8907caa6fe0dd6295.js.map