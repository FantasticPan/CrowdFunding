webpackJsonp([13],{"L/6m":function(e,r){},llNj:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("X3hJ"),s={data:function(){var e=this,r=function(r,t,o){if(!t)return o(new Error("手机号码不能为空"));setTimeout(function(){t.match(/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/)?t==e.$store.state.user.phone?o(new Error("该手机号与当前手机号相同")):setTimeout(function(){e.$axios.post("/canUsePhone",{phone:t}).then(function(e){"error"==e.data?o(new Error("该手机号已被注册，请更改")):o()})},1e3):o(new Error("请输入正确的手机号"))},1e3)};return{loginForm:{phone:"",password:""},loginRules:{phone:[{validator:r,trigger:"blur"}],password:[{validator:function(e,r,t){r?t():t(new Error("请输入密码"))},trigger:"blur"}]},rememberPass:!0,registerForm:{name:"",phone:"",password:"",repeatPass:"",identifyingCode:""},registerRules:{name:[{validator:function(r,t,o){t?setTimeout(function(){e.$axios.post("/isRepeatName",{name:e.registerForm.name}).then(function(e){"error"==e.data?o(new Error("该昵称已被注册，请更改")):o("该昵称可用")})},1e3):o(new Error("请输入昵称"))},trigger:"blur"}],phone:[{validator:r,trigger:"blur"}],password:[{validator:function(e,r,t){r||t(new Error("请输入密码")),setTimeout(function(){r.match(/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,}$/)?r.length<8?t(new Error("密码至少8位")):t():t(new Error("密码至少包含英文和数字两种字符"))},1e3)},trigger:"blur"}],repeatPass:[{validator:function(r,t,o){t||o(new Error("请再次输入密码")),setTimeout(function(){t!==e.registerForm.password?o(new Error("该密码与上面密码不一致")):o()},1e3)},trigger:"blur"}],identifyingCode:[{validator:function(e,r,t){r?t():t(new Error("请输入验证码"))},trigger:"blur"}]}}},methods:{login:function(){var e=this,r=this.loginForm;this.$refs.loginForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;o.a.post("/login",{data:r}).then(function(r){r.data.name?(e.$message({message:"登录成功！",type:"success"}),e.$store.commit("LOGIN_IN",r.data),e.$router.back(-1)):e.$message({message:"密码错误",type:"warning"})}).catch(function(r){e.$message({message:"登录异常",type:"warning"}),console.log(r)})})},register:function(){var e=this.registerForm;this.$refs.registerForm.validate(function(r){if(!r)return console.log("error submit!!"),!1;o.a.post("/register",{data:e}).then(function(e){"suc"===e.data.info?Message({message:"注册成功,赶快去登录吧"}):Message({message:"注册失败",type:"danger"})}).catch(function(e){Message({message:"注册异常",type:"danger"}),console.log(e)})})},resetLoginForm:function(e){this.$refs[e].resetFields()}}},a={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"loginPage"},[t("el-tabs",{attrs:{type:"border-card"}},[t("el-tab-pane",{attrs:{label:"登录"}},[t("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.loginRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{type:"phone","auto-complete":"off"},model:{value:e.loginForm.phone,callback:function(r){e.$set(e.loginForm,"phone",r)},expression:"loginForm.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"",prop:"isWatch"}},[t("el-switch",{attrs:{"active-text":"记住密码","active-color":"#ff4949","inactive-color":"#ccc"},model:{value:e.rememberPass,callback:function(r){e.rememberPass=r},expression:"rememberPass"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),e._v(" "),t("el-button",{on:{click:function(r){e.resetLoginForm("loginForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),t("el-tab-pane",{attrs:{label:"注册"}},[t("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"status-icon":"",rules:e.registerRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"昵称",prop:"name"}},[t("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.registerForm.name,callback:function(r){e.$set(e.registerForm,"name",r)},expression:"registerForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{type:"phone","auto-complete":"off"},model:{value:e.registerForm.phone,callback:function(r){e.$set(e.registerForm,"phone",r)},expression:"registerForm.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认",prop:"repeatPass"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.registerForm.repeatPass,callback:function(r){e.$set(e.registerForm,"repeatPass",r)},expression:"registerForm.repeatPass"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"验证码",prop:"identifyingCode"}},[t("el-col",{attrs:{span:6}},[t("el-input",{staticClass:"identifyingCode",attrs:{type:"text","auto-complete":"off"},model:{value:e.registerForm.identifyingCode,callback:function(r){e.$set(e.registerForm,"identifyingCode",r)},expression:"registerForm.identifyingCode"}})],1),e._v(" "),t("el-col",{staticClass:"identifyingImg",attrs:{span:6}},[t("img",{attrs:{src:"",alt:""}})]),e._v(" "),t("el-col",{attrs:{span:5}},[t("a",{attrs:{href:"javascript:;"}},[e._v("换一张")])])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.register}},[e._v("注册")]),e._v(" "),t("el-button",{on:{click:function(r){e.resetLoginForm("registerForm")}}},[e._v("重置")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var n=t("vSla")(s,a,!1,function(e){t("L/6m")},null,null);r.default=n.exports}});
//# sourceMappingURL=13.d7b6270e37a46c14d665.js.map